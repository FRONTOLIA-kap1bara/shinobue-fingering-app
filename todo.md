# 篠笛運指表作成アプリ - TODO

## 機能実装
- [x] 曲名入力フォーム
- [x] 運指表の画像表示と黒い穴のクリック判定
- [x] クリック時に黒い丸を赤い丸に変更する機能
- [x] 再度クリックで黒い丸に戻す機能
- [x] ページ追加ボタンの実装
- [x] 複数ページの管理
- [x] PDF形式でのダウンロード機能
- [x] PNG形式でのダウンロード機能
- [x] 曲名を運指表の上に表示
- [x] レスポンシブデザイン寯対応（PC、タブレット、スマートフォン）
- [x] コピーライト表示（© 2025 FRONTOLIAインターネット 原田顔真. All rights reserved.）

## デザイン・UI
- [ ] 全体レイアウトの設計
- [ ] 画像の正確な位置調整
- [ ] ダウンロード機能のUI設計

## テスト・確認
- [ ] 各穴の位置が正確であることの確認
- [ ] クリック判定の動作確認
- [ ] PDFおよびPNGダウンロードの動作確認
- [ ] レスポンシブ対応の確認

## 修正・改善
- [x] 画像の黒い丸を直接赤く塗りつぶす方式に変更（新しい丸を作成しない）
- [x] 画像の黒い穴の位置を自動検出し正確に位置を調整

## 緗急修正
- [x] クリック位置を正確に検出し、キャンバスに赤い丸を正確に描画
- [x] 画面の拡大率（ズーム）に対応して、クリック判定と表示位置を正確に保つ
- [x] 赤い丸が黒い丸の中に完全に収まるように調整

## 技術変更による修正
- [x] CanvasおSVGオーバーレイへの変更
- [x] SVGで正確な円形要素を配置し、クリック判定を実装
- [x] 画像とSVGの完全な同期と拡大率寯対応

## 根本的な修正
- [x] 添付された画像から穴の位置を正確に再計算
- [x] 穴の位置データを完全に修正
- [x] SVGオーバーレイの正確性を検証
- [x] 完成版として全機能を確認

## バグ修正
- [x] html2canvasがOKLCH色に対応していないエラーを修正
- [x] CSSがOKLCH色を削除し、RGB色に変更
- [x] ダウンロード機能が正常に動作することを確認
- [x] Tailwind @theme ブロックから OKLCH 色を完全に削除

## OKLCH色の完全削除
- [x] tailwind.config.js を完全に書き直して、すべてのデフォルトカラーを RGB 色に置き換える
- [x] dist ディレクトリを削除してビルドをクリーンアップ

## ダウンロード機能の修正
- [x] ダウンロード時にコピーライト部分を除外し、運指表のみ（A4サイズ）をダウンロード
- [x] 曲名と運指表のみを含める

## ダウンロード時の位置ズレ修正
- [x] Canvas を使用して、画像とSVGを正確に合成してからダウンロード
- [x] ダウンロード時に赤い丸の位置が正確に合うように調整
